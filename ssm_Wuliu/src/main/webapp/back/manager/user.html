<table id="user_data" data-options="fit:true"></table>
<div id="user_search">
	<a href="javascript:user_addUser()" class="easyui-linkbutton" data-options="iconCls:'icon-user-delete',plain:true" style="float:left">添加</a>
	<a href="javascript:user_deleteUser()" class="easyui-linkbutton" data-options="iconCls:'icon-user-delete',plain:true" style="float:left">删除</a>
	<a href="javascript:user_updateUser()" class="easyui-linkbutton" data-options="iconCls:'icon-user-delete',plain:true" style="float:left">修改</a>
	<div class="datagrid-btn-separator"></div>	
	<label>用户ID:</label>
	<input type="text" name="sname" id="user_search_usid" class="song_input">
	<label>用户姓名</label>
	<input type="text" name="sname" id="user_search_uname" class="song_input">
	<a href="javascript:user_searchUser()" class="easyui-linkbutton" data-options="iconCls:'icon-cdr_magnify'">查询</a>
</div>



<div id="user_detail" class="easyui-dialog" title="用户详情" style="width:340px;height:320px;"
	data-options="iconCls:'icon-user-add',resizable:true,modal:true,closed:true">
	<form id="user_detail_user">
	<ul>
		<li>
			<label>用户帐户：</label>
			<input type="text" name="uname" id="user_detail_uname" readonly="readonly"  />			
		</li>
		<li>
			<label>用户姓名：</label>
			<input type="text" name="urealname" id="user_detail_urealname" readonly="readonly" />	
		</li>
		<li>
			<label>用户地址:</label>
			<input type="text" name="uaddress" id="user_detail_uaddress" readonly="readonly" />
		</li>
		<li>
			<label>用户手机:</label>
			<input type="text" name="uphone" id="user_detail_uphone" readonly="readonly" />
		</li>
		<li>
			<label>用户电话:</label>
			<select type="text" name="utel" id="user_detail_utel" readonly="readonly">
		</li>
		<li>
			<label>用户邮箱:</label>
			<input type="text" name="uemail" id="user_detail_uemail" readonly="readonly">
		</li>
	</ul>
	</form>
</div>



<style>
	#operation:hover{
		text-decoration: underline
	}
	
	#user_detail li{
	list-style-type:none;
	margin-top:20px;
	}
	
	
	#user_detail{
	
	border:1px solid #95b8e7;
	line-height:20px;
	}
	
	
	
</style>


<script type="text/javascript">
var userEditRow=undefined;
var userOp;
var userflag;

var userObject=$('#user_data').datagrid({
	url:'../../findAllUser.action',
	fitColumns:true,
	striped:true,
	loadMsg:'数据加载中...',
	rownumbers:true,
	pagination:true,
	pageNumber:1,
	pageSize:5,
	pageList:[5,10,20,30,50],
	sortName:'usid',
	remoteSort:false,
	columns:[[
	          
			  {field:"usids",checkbox:true},
	          {field:'usid',title:'用户编号',width:80,align:'center',sortable:true},   
	          {field:'uname',title:'用户帐号',width:80,align:'center',editor:{type:"text",options:{required:true}}},
	          {field:'urealname',title:'用户姓名',width:80,align:'center',editor:{type:"text",options:{required:true}}},
	          {field:'uaddress',title:'用户地址',width:80,align:'center',editor:{type:"text",options:{required:true}}},
	          {field:'uphone',title:'用户手机',width:80,align:'center',editor:{type:"text",options:{required:true}}},
	          {field:'utel',title:'用户电话',width:80,align:'center',editor:{type:"text",options:{required:true}}},
	          {field:'uemail',title:'用户邮箱',width:80,align:'center',editor:{type:"text",options:{required:true}}},
	          {field:'remark4',title:'操作',width:80,align:'center',formatter:function(val,row,index){
	        	  return "<a id='operation' href='javascript:detail("+val+")' style='color:#39f' >详情</a>&nbsp;&nbsp;<a id='operation' href='javascript:update("+val+")' style='color:#39f'>修改</a>"
	          }}
	             
	]],
	      
	toolbar:"#user_search"
		
});

function user_deleteUser(){
	var rows = userObject.datagrid("getChecked");
	if(rows.length<0){
		$.messager.show({title:'温馨提示',msg:'请编辑你要删除的数据...',timeout:2000,showType:'slide'});
	}else{
		$.messager.confirm('确认提示','数据一旦删除将不能恢复，您确定要删除吗？',function(r){
			if(r){
				var usids="";
				for(var i=0,len=rows.length;i<len-1;i++){
					usids+=rows[i].usid+",";
				}
				usids+=rows[i].usid;
				
				$.post("../../userServlet",{op:"delUser",usid:usids},function(data){
    				data=parseInt($.trim(data));
    				if(data>0){
    					$.messager.show({title:'温馨提示',msg:'用户信息删除成功...',timeout:2000,showType:'slide'});
    					userObject.datagrid("reload");
    				}else{
    					$.messager.alert('失败提示','用户信息删除失败。。。。','error');
    				}
    			},"text");
			}else{
				return;
			}
		});
	}
	
}


function detail(val){
	$('#user_detail').dialog({
		title:"用户详情",
		iconCls: 'icon-user-add',
		buttons:[{
			text: '确认',
			iconCls: 'icon-user-add',
			handler:function(){
			}
		}]
	});
	$('#user_detail').dialog("open");
}


function update(val){
	
}

function cancle(){
	var user_detail = $("#user_detail");
	user_detail.css("display","none");
}




</script>